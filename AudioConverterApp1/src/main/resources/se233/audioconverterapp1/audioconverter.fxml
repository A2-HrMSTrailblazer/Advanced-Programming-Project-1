<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="se233.audioconverterapp1.controller.AudioConverterController">

    <!-- Top: App Title + Settings -->
    <top>
        <VBox>
            <!-- App Title -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="header-bar">
                <Label text="Audio Converter App" styleClass="ui-title"/>
                <Label text="â€¢ Supported formats: MP3, WAV, M4A, FLAC" styleClass="formats-tip"/>

                <Pane HBox.hgrow="ALWAYS" />

                <CheckBox fx:id="darkModeToggle" text="Dark Mode" styleClass="dark-toggle" /> 
            </HBox>
        </VBox>
    </top>

    <!-- Center: Drop Zone + Config Panel -->
    <center>
        <VBox spacing="16" alignment="CENTER" style="-fx-padding: 20;">
            
            <!-- Drop Zone -->
            <StackPane fx:id="dropContainer"
                       VBox.vgrow="ALWAYS"
                       maxWidth="800"
                       minHeight="180"
                       maxHeight="200"
                       pickOnBounds="true"
                       styleClass="dropzone">
                <Label fx:id="dropZone"
                       text="Drop your audio files here or double click to select"
                       styleClass="dropzone-text"/>
            </StackPane>

            <!-- Config Panel (hidden until files added) -->
            <VBox fx:id="configPanel"
                  spacing="16"
                  alignment="TOP_CENTER"
                  visible="false"
                  managed="false"
                  VBox.vgrow="ALWAYS">

                <!-- Toolbar -->
                <ToolBar styleClass="topbar" prefWidth="Infinity">
                    <Label text="Output Format:"/>
                    <ChoiceBox fx:id="formatChoiceBox" prefWidth="120"/>
                    <Button fx:id="applyFormatButton" text="Apply Global Format" styleClass="button-primary" />
                    
                    <Label text="Bitrate:"/>
                    <ChoiceBox fx:id="bitrateChoiceBox" prefWidth="100"/>
                    
                    <Separator orientation="VERTICAL" visible="true" managed="false" />
                    <Label text="Sample Rate:"/>
                    <ChoiceBox fx:id="sampleRateChoiceBox" prefWidth="100"/>

                    <Label text="Channel:"/>
                    <ChoiceBox fx:id="channelChoiceBox" prefWidth="80"/>

                    <Pane HBox.hgrow="ALWAYS"/>
                    <Button fx:id="convertButton" text="Convert" styleClass="button-primary"/>
                    <Button fx:id="cancelButton" text="Cancel"/>
                    <Button fx:id="clearButton" text="Clear List" styleClass="button-danger"/>
                </ToolBar>

                <!-- File Table -->
                <TableView fx:id="fileTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="fileNameColumn" text="File Name"/>
                        <TableColumn fx:id="formatColumn" text="Format"/>
                        <TableColumn fx:id="sizeColumn" text="Size (KB)"/>
                        <TableColumn fx:id="progressColumn" text="Progress"/>
                        <TableColumn fx:id="statusColumn" text="Status"/>
                        <TableColumn fx:id="targetFormatColumn" text="Format"/>
                        <TableColumn fx:id="actionColumn" text="Actions"/>
                    </columns>
                    <placeholder>
                        <Label text="No audio files"/>
                    </placeholder>
                </TableView>

                <!-- Progress at Bottom -->
                <HBox spacing="10" alignment="CENTER_RIGHT" style="-fx-padding: 5 0 0 0;">
                    <Label text="Overall:" styleClass="overall-label" />
                    <ProgressBar fx:id="overallProgress" prefWidth="560" progress="0.0"/>
                    <Label fx:id="overallProgressText" text=" "/>
                </HBox>
            </VBox>
        </VBox>
    </center>
</BorderPane>
